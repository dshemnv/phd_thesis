\documentclass{standalone}

\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{eulervm}
\usepackage{amsmath}
\usepackage{bm}
\usepackage{tikz}
\usepackage{environ}

\usetikzlibrary{fit}
\usetikzlibrary{patterns}
\usetikzlibrary{arrows}
\usetikzlibrary{positioning}

\input{colors}

\begin{document}
  \begin{tikzpicture}%[scale=\tikzscale]

  \tikzset{XOR/.style={draw,circle, minimum height=0.35cm,append after command={
          [shorten >=\pgflinewidth, shorten <=\pgflinewidth,]
          (\tikzlastnode.north) edge (\tikzlastnode.south)
          (\tikzlastnode.east) edge (\tikzlastnode.west)
          }
      }
  }

  \tikzset{DOT/.style={circle,fill,inner sep=1.2pt} }

  \newcommand\startx{0.0}
  \newcommand\startyg{0}
  \newcommand\sed{0.50}
  \newcommand\stasep{1.00}
  \newcommand\xorsep{0.35}

  \renewcommand\startyg{0.0}


  \node[XOR] (g3_x0) at (\startx,                 \startyg+1.75)       {};
  \node      (g3_e0) at (\startx,                 \startyg+1.25) [DOT] {};

  \node[XOR] (g3_x1) at (\startx,                 \startyg+0.75)       {};
  \node      (g3_e1) at (\startx,                 \startyg+0.25) [DOT] {};

  % ---

  \node[XOR] (g3_x2) at (\startx+\stasep,         \startyg+1.75)       {};
  \node[XOR] (g3_x3) at (\startx+\stasep+\xorsep, \startyg+1.25)       {};

  \node      (g3_e2) at (\startx+\stasep,         \startyg+0.75) [DOT] {};
  \node      (g3_e3) at (\startx+\stasep+\xorsep, \startyg+0.25) [DOT] {};

  % -----

  \node[XOR] (g3_x4) at (\startx,                 \startyg-0.25)       {};
  \node      (g3_e4) at (\startx,                 \startyg-0.75) [DOT] {};

  \node[XOR] (g3_x5) at (\startx,                 \startyg-1.25)       {};
  \node      (g3_e5) at (\startx,                 \startyg-1.75) [DOT] {};

  % ---

  \node[XOR] (g3_x6) at (\startx+\stasep,         \startyg-0.25)       {};
  \node[XOR] (g3_x7) at (\startx+\stasep+\xorsep, \startyg-0.75)       {};

  \node      (g3_e6) at (\startx+\stasep,         \startyg-1.25) [DOT] {};
  \node      (g3_e7) at (\startx+\stasep+\xorsep, \startyg-1.75) [DOT] {};

  % ----------

  \node[XOR] (g3_x8)  at (\startx+\stasep+\stasep+\xorsep,                         \startyg+1.75)       {};
  \node[XOR] (g3_x9)  at (\startx+\stasep+\stasep+\xorsep+\xorsep,                 \startyg+1.25)       {};
  \node[XOR] (g3_x10) at (\startx+\stasep+\stasep+\xorsep+\xorsep+\xorsep,         \startyg+0.75)       {};
  \node[XOR] (g3_x11) at (\startx+\stasep+\stasep+\xorsep+\xorsep+\xorsep+\xorsep, \startyg+0.25)       {};

  \node      (g3_e8)  at (\startx+\stasep+\stasep+\xorsep,                         \startyg-0.25) [DOT] {};
  \node      (g3_e9)  at (\startx+\stasep+\stasep+\xorsep+\xorsep,                 \startyg-0.75) [DOT] {};
  \node      (g3_e10) at (\startx+\stasep+\stasep+\xorsep+\xorsep+\xorsep,         \startyg-1.25) [DOT] {};
  \node      (g3_e11) at (\startx+\stasep+\stasep+\xorsep+\xorsep+\xorsep+\xorsep, \startyg-1.75) [DOT] {};

  \draw[-,>=latex] (\startx-\sed, \startyg+1.75) node[left] {$0 = v_0$} -- (g3_x0);
  \draw[-,>=latex] (\startx-\sed, \startyg+1.25) node[left] {$0 = v_1$} -- (g3_e0);
  \draw[-,>=latex] (g3_x0)                       -- (g3_e0);
  \draw[-,>=latex] (g3_x0)                       -- (g3_x2);
  \draw[-,>=latex] (g3_e0)                       -- (g3_x3);

  \draw[-,>=latex] (\startx-\sed, \startyg+0.75) node[left] {$0 = v_2$} -- (g3_x1);
  \draw[-,>=latex] (\startx-\sed, \startyg+0.25) node[left] {$u_0 = v_3$} -- (g3_e1);
  \draw[-,>=latex] (g3_x1)                       -- (g3_e1);
  \draw[-,>=latex] (g3_x1)                       -- (g3_e2);
  \draw[-,>=latex] (g3_e1)                       -- (g3_e3);
  \draw[-,>=latex] (g3_e2)                       -- (g3_x2);
  \draw[-,>=latex] (g3_e3)                       -- (g3_x3);
  \draw[-,>=latex] (g3_x2)                       -- (g3_x8);
  \draw[-,>=latex] (g3_x3)                       -- (g3_x9);
  \draw[-,>=latex] (g3_e2)                       -- (g3_x10);
  \draw[-,>=latex] (g3_e3)                       -- (g3_x11);

  \draw[-,>=latex] (\startx-\sed, \startyg-0.25) node[left] {$0 = v_4$} -- (g3_x4);
  \draw[-,>=latex] (\startx-\sed, \startyg-0.75) node[left] {$u_1 = v_5$} -- (g3_e4);
  \draw[-,>=latex] (g3_x4)                       -- (g3_e4);
  \draw[-,>=latex] (g3_x4)                       -- (g3_x6);
  \draw[-,>=latex] (g3_e4)                       -- (g3_x7);

  \draw[-,>=latex] (\startx-\sed, \startyg-1.25) node[left] {$u_2 = v_6$} -- (g3_x5);
  \draw[-,>=latex] (\startx-\sed, \startyg-1.75) node[left] {$u_3 = v_7$} -- (g3_e5);
  \draw[-,>=latex] (g3_x5)                       -- (g3_e5);
  \draw[-,>=latex] (g3_x5)                       -- (g3_e6);
  \draw[-,>=latex] (g3_e5)                       -- (g3_e7);
  \draw[-,>=latex] (g3_e6)                       -- (g3_x6);
  \draw[-,>=latex] (g3_e7)                       -- (g3_x7);
  \draw[-,>=latex] (g3_x6)                       -- (g3_e8);
  \draw[-,>=latex] (g3_x7)                       -- (g3_e9);
  \draw[-,>=latex] (g3_e6)                       -- (g3_e10);
  \draw[-,>=latex] (g3_e7)                       -- (g3_e11);

  \draw [-,>=latex] (g3_e8)                      -- (g3_x8);
  \draw [-,>=latex] (g3_e9)                      -- (g3_x9);
  \draw [-,>=latex] (g3_e10)                     -- (g3_x10);
  \draw [-,>=latex] (g3_e11)                     -- (g3_x11);

  % \draw[-,>=latex] (\startx+\stasep+\stasep+\xorsep+\xorsep+\xorsep+\sed, \startyg+1.75) node[right] {$c_0 = v_0 \oplus v_1 \oplus v_2 \oplus v_3 \oplus v_4 \oplus v_5 \oplus v_6 \oplus v_7$} -- (g3_x8);
  \draw[-,>=latex] (\startx+\stasep+\stasep+\xorsep+\xorsep+\xorsep+\xorsep+\sed, \startyg+1.75) -- (g3_x8);
  \draw[-,>=latex] (\startx+\stasep+\stasep+\xorsep+\xorsep+\xorsep+\xorsep+\sed, \startyg+1.25) -- (g3_x9);
  \draw[-,>=latex] (\startx+\stasep+\stasep+\xorsep+\xorsep+\xorsep+\xorsep+\sed, \startyg+0.75) -- (g3_x10);
  \draw[-,>=latex] (\startx+\stasep+\stasep+\xorsep+\xorsep+\xorsep+\xorsep+\sed, \startyg+0.25) -- (g3_x11);
  \draw[-,>=latex] (\startx+\stasep+\stasep+\xorsep+\xorsep+\xorsep+\xorsep+\sed, \startyg-0.25) -- (g3_e8);
  \draw[-,>=latex] (\startx+\stasep+\stasep+\xorsep+\xorsep+\xorsep+\xorsep+\sed, \startyg-0.75) -- (g3_e9);
  \draw[-,>=latex] (\startx+\stasep+\stasep+\xorsep+\xorsep+\xorsep+\xorsep+\sed, \startyg-1.25) -- (g3_e10);
  \draw[-,>=latex] (\startx+\stasep+\stasep+\xorsep+\xorsep+\xorsep+\xorsep+\sed, \startyg-1.75) -- (g3_e11);

  \node[draw=Paired-1, scale=0.82, rounded corners=2pt, dashed, fit=(g3_x0) (g3_e0)] (g3_l3_1) {};
  \node[draw=Paired-1, scale=0.82, rounded corners=2pt, dashed, fit=(g3_x1) (g3_e1)] (g2_l3_2) {};
  \node[draw=Paired-1, scale=0.82, rounded corners=2pt, dashed, fit=(g3_x4) (g3_e4)] (g3_l3_3) {};
  \node[draw=Paired-1, scale=0.82, rounded corners=2pt, dashed, fit=(g3_x5) (g3_e5)] (g2_l3_4) {};

  \node[draw=Paired-3, scale=0.975, minimum width=2.1cm, rounded corners=2pt, dashed, fit=(g3_x0) (g3_x2) (g3_x3) (g3_e2) (g3_e3)] (g3_l1_1) {};
  \node[draw=Paired-3, scale=0.975, minimum width=2.1cm, rounded corners=2pt, dashed, fit=(g3_x4) (g3_x6) (g3_x7) (g3_e6) (g3_e7)] (g3_l1_2) {};

  \node[draw=Paired-5, scale=1.040, minimum width=4.1cm, rounded corners=2pt, dashed, fit=(g3_x0) (g3_e5) (g3_x8) (g3_x11) (g3_e8) (g3_e11)] (g3_l1_1) {};


  % ---------------------------------------------------------------------------
  % ---------------------------------------------------------------------------
  % ---------------------------------------------------------------------------

  \renewcommand\startx{4.825}

  \node[XOR] (g3_x0) at (\startx,                 \startyg+1.75)       {};
  \node      (g3_e0) at (\startx,                 \startyg+1.25) [DOT] {};

  \node[XOR] (g3_x1) at (\startx,                 \startyg+0.75)       {};
  \node      (g3_e1) at (\startx,                 \startyg+0.25) [DOT] {};

  % ---

  \node[XOR] (g3_x2) at (\startx+\stasep,         \startyg+1.75)       {};
  \node[XOR] (g3_x3) at (\startx+\stasep+\xorsep, \startyg+1.25)       {};

  \node      (g3_e2) at (\startx+\stasep,         \startyg+0.75) [DOT] {};
  \node      (g3_e3) at (\startx+\stasep+\xorsep, \startyg+0.25) [DOT] {};

  % -----

  \node[XOR] (g3_x4) at (\startx,                 \startyg-0.25)       {};
  \node      (g3_e4) at (\startx,                 \startyg-0.75) [DOT] {};

  \node[XOR] (g3_x5) at (\startx,                 \startyg-1.25)       {};
  \node      (g3_e5) at (\startx,                 \startyg-1.75) [DOT] {};

  % ---

  \node[XOR] (g3_x6) at (\startx+\stasep,         \startyg-0.25)       {};
  \node[XOR] (g3_x7) at (\startx+\stasep+\xorsep, \startyg-0.75)       {};

  \node      (g3_e6) at (\startx+\stasep,         \startyg-1.25) [DOT] {};
  \node      (g3_e7) at (\startx+\stasep+\xorsep, \startyg-1.75) [DOT] {};

  % ----------

  \node[XOR] (g3_x8)  at (\startx+\stasep+\stasep+\xorsep,                         \startyg+1.75)       {};
  \node[XOR] (g3_x9)  at (\startx+\stasep+\stasep+\xorsep+\xorsep,                 \startyg+1.25)       {};
  \node[XOR] (g3_x10) at (\startx+\stasep+\stasep+\xorsep+\xorsep+\xorsep,         \startyg+0.75)       {};
  \node[XOR] (g3_x11) at (\startx+\stasep+\stasep+\xorsep+\xorsep+\xorsep+\xorsep, \startyg+0.25)       {};

  \node      (g3_e8)  at (\startx+\stasep+\stasep+\xorsep,                         \startyg-0.25) [DOT] {};
  \node      (g3_e9)  at (\startx+\stasep+\stasep+\xorsep+\xorsep,                 \startyg-0.75) [DOT] {};
  \node      (g3_e10) at (\startx+\stasep+\stasep+\xorsep+\xorsep+\xorsep,         \startyg-1.25) [DOT] {};
  \node      (g3_e11) at (\startx+\stasep+\stasep+\xorsep+\xorsep+\xorsep+\xorsep, \startyg-1.75) [DOT] {};

  \draw[-,>=latex] (\startx-\sed, \startyg+1.75) -- (g3_x0);
  \draw[-,>=latex] (\startx-\sed, \startyg+1.25) -- (g3_e0);
  \draw[-,>=latex] (g3_x0)                       -- (g3_e0);
  \draw[-,>=latex] (g3_x0)                       -- (g3_x2);
  \draw[-,>=latex] (g3_e0)                       -- (g3_x3);

  \draw[-,>=latex] (\startx-\sed, \startyg+0.75) -- (g3_x1);
  \draw[-,>=latex] (\startx-\sed, \startyg+0.25) -- (g3_e1);
  \draw[-,>=latex] (g3_x1)                       -- (g3_e1);
  \draw[-,>=latex] (g3_x1)                       -- (g3_e2);
  \draw[-,>=latex] (g3_e1)                       -- (g3_e3);
  \draw[-,>=latex] (g3_e2)                       -- (g3_x2);
  \draw[-,>=latex] (g3_e3)                       -- (g3_x3);
  \draw[-,>=latex] (g3_x2)                       -- (g3_x8);
  \draw[-,>=latex] (g3_x3)                       -- (g3_x9);
  \draw[-,>=latex] (g3_e2)                       -- (g3_x10);
  \draw[-,>=latex] (g3_e3)                       -- (g3_x11);

  \draw[-,>=latex] (\startx-\sed, \startyg-0.25) -- (g3_x4);
  \draw[-,>=latex] (\startx-\sed, \startyg-0.75) -- (g3_e4);
  \draw[-,>=latex] (g3_x4)                       -- (g3_e4);
  \draw[-,>=latex] (g3_x4)                       -- (g3_x6);
  \draw[-,>=latex] (g3_e4)                       -- (g3_x7);

  \draw[-,>=latex] (\startx-\sed, \startyg-1.25) -- (g3_x5);
  \draw[-,>=latex] (\startx-\sed, \startyg-1.75) -- (g3_e5);
  \draw[-,>=latex] (g3_x5)                       -- (g3_e5);
  \draw[-,>=latex] (g3_x5)                       -- (g3_e6);
  \draw[-,>=latex] (g3_e5)                       -- (g3_e7);
  \draw[-,>=latex] (g3_e6)                       -- (g3_x6);
  \draw[-,>=latex] (g3_e7)                       -- (g3_x7);
  \draw[-,>=latex] (g3_x6)                       -- (g3_e8);
  \draw[-,>=latex] (g3_x7)                       -- (g3_e9);
  \draw[-,>=latex] (g3_e6)                       -- (g3_e10);
  \draw[-,>=latex] (g3_e7)                       -- (g3_e11);

  \draw [-,>=latex] (g3_e8)                      -- (g3_x8);
  \draw [-,>=latex] (g3_e9)                      -- (g3_x9);
  \draw [-,>=latex] (g3_e10)                     -- (g3_x10);
  \draw [-,>=latex] (g3_e11)                     -- (g3_x11);

  \draw[-,>=latex] (\startx+\stasep+\stasep+\xorsep+\xorsep+\xorsep+\xorsep+\sed, \startyg+1.75) -- (g3_x8);
  \draw[-,>=latex] (\startx+\stasep+\stasep+\xorsep+\xorsep+\xorsep+\xorsep+\sed, \startyg+1.25) -- (g3_x9);
  \draw[-,>=latex] (\startx+\stasep+\stasep+\xorsep+\xorsep+\xorsep+\xorsep+\sed, \startyg+0.75) -- (g3_x10);
  \draw[-,>=latex] (\startx+\stasep+\stasep+\xorsep+\xorsep+\xorsep+\xorsep+\sed, \startyg+0.25) -- (g3_x11);
  \draw[-,>=latex] (\startx+\stasep+\stasep+\xorsep+\xorsep+\xorsep+\xorsep+\sed, \startyg-0.25) -- (g3_e8);
  \draw[-,>=latex] (\startx+\stasep+\stasep+\xorsep+\xorsep+\xorsep+\xorsep+\sed, \startyg-0.75) -- (g3_e9);
  \draw[-,>=latex] (\startx+\stasep+\stasep+\xorsep+\xorsep+\xorsep+\xorsep+\sed, \startyg-1.25) -- (g3_e10);
  \draw[-,>=latex] (\startx+\stasep+\stasep+\xorsep+\xorsep+\xorsep+\xorsep+\sed, \startyg-1.75) -- (g3_e11);

  \node[draw=Paired-1, scale=0.95, rounded corners=2pt, fit=(g3_x0) (g3_e0)] (g3_l3_1) {};
  \node[draw=Paired-1, scale=0.95, rounded corners=2pt, fit=(g3_x1) (g3_e1)] (g2_l3_2) {};
  \node[draw=Paired-1, scale=0.95, rounded corners=2pt, fit=(g3_x4) (g3_e4)] (g3_l3_3) {};
  \node[draw=Paired-1, scale=0.95, rounded corners=2pt, fit=(g3_x5) (g3_e5)] (g2_l3_4) {};

  \node[draw=Paired-3, scale=0.975, rounded corners=2pt, fit=(g3_x2) (g3_x3) (g3_e2) (g3_e3)] (g3_l1_1) {};
  \node[draw=Paired-3, scale=0.975, rounded corners=2pt, fit=(g3_x6) (g3_x7) (g3_e6) (g3_e7)] (g3_l1_2) {};

  \node[draw=Paired-5, scale=0.987, rounded corners=2pt, fit=(g3_x8) (g3_x11) (g3_e8) (g3_e11)] (g3_l1_1) {};

  % ---------------------------------------------------------------------------
  % ---------------------------------------------------------------------------
  % ---------------------------------------------------------------------------

  \renewcommand\startx{9.65}

  \node[draw=black, fill=white, text=black, circle, minimum width=0.5cm, scale=0.6] (g3_n0) at (\startx, \startyg+1.75) {$v_0$};
  \node[draw=black, fill=white, text=black, circle, minimum width=0.3cm, scale=0.6] (g3_n1) at (\startx, \startyg+1.25) {$v_1$};
  \node[draw=black, fill=white, text=black, circle, minimum width=0.3cm, scale=0.6] (g3_n2) at (\startx, \startyg+0.75) {$v_2$};
  \node[draw=black, fill=black, text=white, circle, minimum width=0.3cm, scale=0.6] (g3_n3) at (\startx, \startyg+0.25) {$v_3$};
  \node[draw=black, fill=white, text=black, circle, minimum width=0.3cm, scale=0.6] (g3_n4) at (\startx, \startyg-0.25) {$v_4$};
  \node[draw=black, fill=black, text=white, circle, minimum width=0.3cm, scale=0.6] (g3_n5) at (\startx, \startyg-0.75) {$v_5$};
  \node[draw=black, fill=black, text=white, circle, minimum width=0.3cm, scale=0.6] (g3_n6) at (\startx, \startyg-1.25) {$v_6$};
  \node[draw=black, fill=black, text=white, circle, minimum width=0.3cm, scale=0.6] (g3_n7) at (\startx, \startyg-1.75) {$v_7$};

  \node[draw=Paired-1, fill=Paired-1!10, circle, minimum width=0.5cm, scale=0.7] (g3_n8) at (\startx+\stasep, \startyg+1.5) {$n_0^2$};
  \node[draw=Paired-1, fill=Paired-1!10, circle, minimum width=0.5cm, scale=0.7] (g3_n9) at (\startx+\stasep, \startyg+0.5) {$n_1^2$};
  \node[draw=Paired-1, fill=Paired-1!10, circle, minimum width=0.5cm, scale=0.7] (g3_n10) at (\startx+\stasep, \startyg-0.5) {$n_2^2$};
  \node[draw=Paired-1, fill=Paired-1!10, circle, minimum width=0.5cm, scale=0.7] (g3_n11) at (\startx+\stasep, \startyg-1.5) {$n_3^2$};

  \node[draw=Paired-3, fill=Paired-3!10, circle, minimum width=0.5cm, scale=0.7] (g3_n12) at (\startx+\stasep+\stasep, \startyg+1.00) {$n_0^1$};
  \node[draw=Paired-3, fill=Paired-3!10, circle, minimum width=0.5cm, scale=0.7] (g3_n13) at (\startx+\stasep+\stasep, \startyg-1.00) {$n_1^1$};

  \node[draw=Paired-5, fill=Paired-5!10, circle, minimum width=0.5cm, scale=0.7] (g3_n14) at (\startx+\stasep+\stasep+\stasep, \startyg+0.00) {$n_0^0$};

  \draw [-,>=latex] (g3_n14) -- (g3_n13);
  \draw [-,>=latex] (g3_n14) -- (g3_n12);
  \draw [-,>=latex] (g3_n13) -- (g3_n11);
  \draw [-,>=latex] (g3_n13) -- (g3_n10);
  \draw [-,>=latex] (g3_n12) -- (g3_n9);
  \draw [-,>=latex] (g3_n12) -- (g3_n8);
  \draw [-,>=latex] (g3_n11) -- (g3_n7);
  \draw [-,>=latex] (g3_n11) -- (g3_n6);
  \draw [-,>=latex] (g3_n10) -- (g3_n5);
  \draw [-,>=latex] (g3_n10) -- (g3_n4);
  \draw [-,>=latex] (g3_n9)  -- (g3_n3);
  \draw [-,>=latex] (g3_n9)  -- (g3_n2);
  \draw [-,>=latex] (g3_n8)  -- (g3_n1);
  \draw [-,>=latex] (g3_n8)  -- (g3_n0);

  \end{tikzpicture}
\end{document}