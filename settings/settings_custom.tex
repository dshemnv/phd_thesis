%
%   Use this file for your own custom packages, command-definitions, etc...
%

% Rubber configuration --------------------------------------------------------
% rubber: setlist arguments --shell-escape

% Packages --------------------------------------------------------------------
\usepackage[english]{minitoc} % rappel du plan du chapitre en cours
\usepackage{array}
\usepackage{longtable} % pour la liste des notations
\usepackage[toc,page]{appendix}
\usepackage{pgfplots} % package pour les graphiques
\usepackage[english,onelanguage,ruled,linesnumbered,vlined]{algorithm2e}
\usepackage[
  labelnumber  = true,
  backend      = biber,
  style        = alphabetic,
  citestyle    = alphabetic,
  maxnames     = 99,
  backend      = biber,
  defernumbers = true,
  isbn         = false,
  doi          = true,
  backref      = true]{biblatex}
\addbibresource{tail/bibliography.bib}
\usepackage{verbatim}
\usepackage{multirow}
\usepackage{multicol}
\usepackage{xspace}
\usepackage{xcolor}
\usepackage{pifont}
\usepackage{hyperref}
\usepackage{minted} % beautiful source code
\usepackage{sourcecodepro} % beautiful source code (works with 'minted')
\usepackage{chngcntr}
\usepackage{bm} % bold math
\usepackage{geometry} % reduce margins
\usepackage{tkz-kiviat}
\usepackage{subfig} % multi figures
\usepackage{adjustbox} % rotate big table 90 degree

% Parameters ------------------------------------------------------------------
\setcounter{secnumdepth}{4} % package 'minitoc'
\setcounter{tocdepth}{2} % package 'minitoc'
\newlength{\Oldarrayrulewidth} % package 'array'
\setminted{fontsize=\small,framesep=2mm} % package 'minted'
\usemintedstyle{friendly} % package 'minted'
\counterwithin{listing}{chapter} % package 'chngcntr'
\usetikzlibrary{arrows} % package 'tikz'
\SetKwComment{Comment}{$\triangleright$\ }{} % package 'algorithm2e'

% add column types for big table
\newcolumntype{L}[1]{>{\raggedright\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{C}[1]{>{\centering\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{R}[1]{>{\raggedleft\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newlength{\simcolwidth}
\setlength{\simcolwidth}{0.5cm}

% configure a custom mini table of contents (% package 'minitoc')
\renewcommand{\mtctitle}{}
\tightmtctrue
\nomtcrule
\newcommand{\minitoccustom}{\vspace*{1em}{\color{bleuUni}\hrule}\vspace*{-1ex}\minitoc\vspace*{-1ex}{\color{bleuUni}\hrule}}

% package 'hyperref'
\hypersetup{
  pdfborder  = {0 0 0},
  colorlinks = true,
  linkcolor  = marronUni,
  citecolor  = bleuUni,
  urlcolor   = marronUni}
\urlstyle{same}

% separate multi-citations by a comma instead of a semicolon in 'biblatex'
\renewcommand*{\multicitedelim}{\addcomma\addspace}
% configure 'biblatex' for the multibib
\DeclareFieldFormat{labelnumberwidth}{\mkbibbrackets{#1}}
\renewbibmacro*{cite}{%
  \printtext[bibhyperref]{%
    \printfield{labelprefix}%
    \ifkeyword{Cassagne}
      {\printfield{labelnumber}}
      {\printfield{labelalpha}%
       \printfield{extraalpha}}}}
% configure 'biblatex' for the multibib
\defbibenvironment{bibliographyNUM}
  {\list
     {\printtext[labelnumberwidth]{%
        \printfield{labelprefix}%
        \printfield{labelnumber}}}
     {\setlength{\labelwidth}{\labelnumberwidth}%
      \setlength{\leftmargin}{\labelwidth}%
      \setlength{\labelsep}{\biblabelsep}%
      \addtolength{\leftmargin}{\labelsep}%
      \setlength{\itemsep}{\bibitemsep}%
      \setlength{\parsep}{\bibparsep}}%
      \renewcommand*{\makelabel}[1]{\hss##1}}
  {\endlist}
  {\item}
% % configure 'biblatex' back references text
% \DefineBibliographyStrings{english}{%
%     backrefpage  = {see p.}, % for single page number
%     backrefpages = {see pp.} % for multiple page numbers
% }

% Math operators --------------------------------------------------------------
\DeclareMathOperator{\card}{card}
\DeclareMathOperator{\diag}{diag}
\DeclareMathOperator{\prob}{P}
\DeclareMathOperator*{\maxstar}{max*}
\DeclareMathOperator*{\argmax}{arg\,max}
\DeclareMathOperator*{\decide}{decide}
\DeclareMathOperator*{\computeGamma}{computeGamma}
\DeclareMathOperator*{\computeAlpha}{computeAlpha}
\DeclareMathOperator*{\computeBeta}{computeBeta}
\DeclareMathOperator*{\computeExtrinsic}{computeExtrinsic}
\DeclareMathOperator*{\initAlpha}{initAlpha}
\DeclareMathOperator*{\initBeta}{initBeta}
\DeclareMathOperator*{\sizeof}{sizeof}
\DeclareMathOperator*{\argmin}{arg\,min}

% Commands --------------------------------------------------------------------
\newcommand{\R}{\textsuperscript{\textregistered}}
\newcommand{\TM}{\textsuperscript{\texttrademark}}
% \newcommand{\cmark}{\ding{51}}
% \newcommand{\xmark}{\ding{55}}
\newcommand{\cmark}{\textcolor{btfGreen}{\ding{51}}}
\newcommand{\xmark}{\textcolor{btfRed}{\ding{55}}}
\newcommand{\Arikan}{Ar{\i}kan\xspace}
\newcommand{\AFFECT}{AFF3CT\xspace}
\newcommand{\MIPP}{MIPP\xspace}
\newcommand{\longMIPP}{\textsc{MyIntrinsics++}\xspace}
\newcommand{\TSIMD}{\texttt{T-SIMD}\xspace}
\newcommand{\xsimd}{\texttt{xsimd}\xspace}
\newcommand{\simdpp}{\texttt{simdpp}\xspace}
\newcommand{\Vc}{\texttt{Vc}\xspace}
\newcommand{\VCL}{\texttt{VCL}\xspace}
\newcommand{\BoostSIMD}{\texttt{Boost.SIMD}\xspace}
\newcommand{\bSIMD}{\texttt{bSIMD}\xspace}
\newcommand{\C}{\texttt{C}\xspace}
\newcommand{\Cxx}{\texttt{C++}\xspace}
\newcommand{\Cxy}[1]{\texttt{C++{#1}}\xspace}
\newcommand{\CppUnit}{\texttt{CppUnit}\xspace}
\newcommand{\Cline}[2]{
  \noalign{\global\setlength{\Oldarrayrulewidth}{\arrayrulewidth}}
  \noalign{\global\setlength{\arrayrulewidth}{#1}}\cline{#2}
  \noalign{\global\setlength{\arrayrulewidth}{\Oldarrayrulewidth}}}
\renewcommand\listoflistingscaption{List of Source Codes}
\def\bl{big.\textsc{LITTLE}\xspace}
\def\big{big\xspace}
\def\little{\textsc{LITTLE}\xspace}
\def\odr{\textsc{Odroid}\xspace}
\def\odrx{\textsc{Odroid-XU+E}\xspace}
\def\juno{\textsc{Juno}\xspace}
\def\mus{\si{\micro\second}}

% -----------------------------------------------------------------------------
\usepackage{letltxmacro}
% https://tex.stackexchange.com/q/88001/5764
\LetLtxMacro\oldttfamily\ttfamily
\DeclareRobustCommand{\ttfamily}{\oldttfamily\csname ttsize\endcsname}
\newcommand{\setttsize}[1]{\def\ttsize{#1}}%

\setttsize{\small}% \ttfamily will be \Large
% -----------------------------------------------------------------------------